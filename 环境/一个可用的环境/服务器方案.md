[toc]

## ubuntu虚拟机

只用管python，ubuntu内无须装显卡驱动和cuda，就保持

![image-20240827100554364](https://cdn.jsdelivr.net/gh/sword4869/pic1@main/images/202408271005431.png)

conda装个cuda就行（在下面，注意顺序）

### miniconda

下载：[Miniconda — Anaconda documentation](https://docs.anaconda.com/miniconda/)

配置conda： [conda.md](virtual environment\conda.md) 

配置pip： [pip.md](virtual environment\pip.md) 

### python版本

由pytorch3d限定: 先看下面

```bash
conda create -n py3d python=3.10 -y
```

[conda-forge / packages / cudatoolkit](https://anaconda.org/conda-forge/cudatoolkit/files)

```bash
# conda install cudatoolkit=10.2 -c nvidia -c conda-forge

conda install --use-local cudatoolkit-10.2.89-hdec6ad0_13.conda
```

### pytorch

> 最新

pytorch: [Start Locally | PyTorch](https://pytorch.org/get-started/locally/)

> 离线下载（推荐）

当下载老网络中断，就可以直接去下whl: 

[download.pytorch.org/whl/torch/](https://download.pytorch.org/whl/torch/)

[download.pytorch.org/whl/torchvision](https://download.pytorch.org/whl/torchvision): 注意不是一一对应，而是[pytorch/vision: Datasets, Transforms and Models specific to Computer Vision (github.com)](https://github.com/pytorch/vision#installation)

![image-20240826204446789](https://cdn.jsdelivr.net/gh/sword4869/pic1@main/images/202408262044841.png)

```bash
pip install torch-1.11.0+cu102-cp39-cp39-linux_x86_64.whl
pip install torchvision-0.12.0+cu102-cp39-cp39-linux_x86_64.whl
```
```python
# 这个才是真正看的版本
import torch
print(torch.version.cuda)
# '11.6'
print(torch.cuda.is_available())
# True
print(torch.randn((3,4)).cuda())
```

### pytorch3d

pytorch3d:  [10.2.md](..\..\pytorch3d\安装\10.2.md)  [11.7.md](..\..\pytorch3d\安装\11.7.md)  [12.1.md](..\..\pytorch3d\安装\12.1.md)

- 注意要 `pip install .`，而不是`-e`。

测试

```python
import pytorch3d
from pytorch3d.utils import ico_sphere
from pytorch3d.io import load_obj
from pytorch3d.structures import Meshes
from pytorch3d.ops import sample_points_from_meshes
from pytorch3d.loss import chamfer_distance
```

### 进入项目

```bash
pip install -r requirement.txt
```

### 打包

```bash
conda install -c conda-forge conda-pack -y

conda pack -n py3d -o py3d.tar.gz  --ignore-missing-files

tar -xvf py3d.tar.gz
source py3d/bin/activate
source deactivate
```

